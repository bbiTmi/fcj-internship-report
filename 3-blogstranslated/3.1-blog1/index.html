<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="nguyenlamgiang2198@gmial.com"><link rel=icon href=../../images/favicon.png type=image/png><title>Blog 1 :: Internship Report</title>
<link href=../../css/nucleus.css?1765293643 rel=stylesheet><link href=../../css/fontawesome-all.min.css?1765293643 rel=stylesheet><link href=../../css/hybrid.css?1765293643 rel=stylesheet><link href=../../css/featherlight.min.css?1765293643 rel=stylesheet><link href=../../css/perfect-scrollbar.min.css?1765293643 rel=stylesheet><link href=../../css/auto-complete.css?1765293643 rel=stylesheet><link href=../../css/atom-one-dark-reasonable.css?1765293643 rel=stylesheet><link href=../../css/theme.css?1765293643 rel=stylesheet><link href=../../css/hugo-theme.css?1765293643 rel=stylesheet><link href=../../css/theme-workshop.css?1765293643 rel=stylesheet><script src=../../js/jquery-3.3.1.min.js?1765293643></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../3-blogstranslated/3.1-blog1/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script src=../../js/lunr.min.js?1765293643 defer></script><script src=../../js/auto-complete.js?1765293643 defer></script><script>var baseurl="https://bbitmi.github.io/fcj-internship-report"</script><script src=../../js/search.js?1765293643 defer></script></div><div class=highlightable><ul class=topics><li data-nav-id=/1-worklog/ title=Worklog class=dd-item><a href=../../1-worklog/><b>1. </b>Worklog
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/1-worklog/1.1-week1/ title="Worklog Week 1" class=dd-item><a href=../../1-worklog/1.1-week1/><b>1.1. </b>Worklog Week 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.2-week2/ title="Worklog Week 2" class=dd-item><a href=../../1-worklog/1.2-week2/><b>1.2. </b>Worklog Week 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.3-week3/ title="Worklog Week 3" class=dd-item><a href=../../1-worklog/1.3-week3/><b>1.3. </b>Worklog Week 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.4-week4/ title="Worklog Week 4" class=dd-item><a href=../../1-worklog/1.4-week4/><b>1.4. </b>Worklog Week 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.5-week5/ title="Worklog Week 5" class=dd-item><a href=../../1-worklog/1.5-week5/><b>1.5. </b>Worklog Week 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.6-week6/ title="Worklog Week 6" class=dd-item><a href=../../1-worklog/1.6-week6/><b>1.6. </b>Worklog Week 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.7-week7/ title="Worklog Week 7" class=dd-item><a href=../../1-worklog/1.7-week7/><b>1.7. </b>Worklog Week 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.8-week8/ title="Worklog Week 8" class=dd-item><a href=../../1-worklog/1.8-week8/><b>1.8. </b>Worklog Week 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.9-week9/ title="Worklog Week 9" class=dd-item><a href=../../1-worklog/1.9-week9/><b>1.9. </b>Worklog Week 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.10-week10/ title="Worklog Week 10" class=dd-item><a href=../../1-worklog/1.10-week10/><b>1.10. </b>Worklog Week 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.11-week11/ title="Worklog Week 11" class=dd-item><a href=../../1-worklog/1.11-week11/><b>1.11. </b>Worklog Week 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.12-week12/ title="Worklog Week 12" class=dd-item><a href=../../1-worklog/1.12-week12/><b>1.12 </b>Worklog Week 12
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.12-week13/ title="Worklog Week 13" class=dd-item><a href=../../1-worklog/1.12-week13/><b>1.13 </b>Worklog Week 13
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/2-proposal/ title=Proposal class=dd-item><a href=../../2-proposal/><b>2. </b>Proposal
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/ title="Translated Blogs" class="dd-item
parent"><a href=../../3-blogstranslated/><b>3. </b>Translated Blogs
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/3-blogstranslated/3.1-blog1/ title="Blog 1" class="dd-item
active"><a href=../../3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/4-eventparticipated/ title="Events Participated" class=dd-item><a href=../../4-eventparticipated/><b>4. </b>Events Participated
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.3-event3/ title="Event 3" class=dd-item><a href=../../4-eventparticipated/4.3-event3/><b>4.3. </b>Event 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.4-event4/ title="Event 4" class=dd-item><a href=../../4-eventparticipated/4.4-event4/><b>4.4. </b>Event 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.5-event5/ title="Event 5" class=dd-item><a href=../../4-eventparticipated/4.5-event5/><b>4.5. </b>Event 5
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/ title=Workshop class=dd-item><a href=../../5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.1-workshop-overview/ title="Workshop Overview" class=dd-item><a href=../../5-workshop/5.1-workshop-overview/><b>5.1. </b>Workshop Overview
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.2-prerequiste/ title=Preparation class=dd-item><a href=../../5-workshop/5.2-prerequiste/><b>5.2. </b>Preparation
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-s3-vpc/ title="VPC & Amazon RDS" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/><b>5.3. </b>VPC & Amazon RDS
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.3-s3-vpc/5.3.1-create-gwe/ title="Create VPC" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/5.3.1-create-gwe/><b>5.3.1. </b>Create VPC
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-s3-vpc/5.3.2-test-gwe/ title="Create Amazon RDS" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/5.3.2-test-gwe/><b>5.3.2. </b>Create Amazon RDS
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.4-s3-onprem/ title="Lambda & API Gateway" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/><b>5.4. </b>Lambda & API Gateway
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.1-prepare/ title="Create Lambda Functions" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.1-prepare/><b>5.4.1. </b>Create Lambda Functions
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/ title="Create API Gateway" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/><b>5.4.2. </b>Create API Gateway
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/ title="Test API Endpoints" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/><b>5.4.3. </b>Test API Endpoints
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/ title="Configure CORS & Security" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/><b>5.4.4. </b>Configure CORS & Security
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.5-policy/ title="S3, CloudFront & Amplify" class=dd-item><a href=../../5-workshop/5.5-policy/><b>5.5. </b>S3, CloudFront & Amplify
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.6-cleanup/ title="CI/CD, CloudWatch & Cleanup" class=dd-item><a href=../../5-workshop/5.6-cleanup/><b>5.6. </b>CI/CD, CloudWatch & Cleanup
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/6-self-evaluation/ title=Self-Assessment class=dd-item><a href=../../6-self-evaluation/><b>6. </b>Self-Assessment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/7-feedback/ title="Sharing and Feedback" class=dd-item><a href=../../7-feedback/><b>7. </b>Sharing and Feedback
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://bbitmi.github.io/fcj-internship-report/3-blogstranslated/3.1-blog1/ selected>English</option><option id=vi value=https://bbitmi.github.io/fcj-internship-report/vi/3-blogstranslated/3.1-blog1/>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../>Internship Report</a> > <a href=../../3-blogstranslated/>Translated Blogs</a> > Blog 1</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#1-geolocation-blocking-using-amazon-route-53>1. Geolocation blocking using Amazon Route 53</a></li><li><a href=#2-amazon-location-service-with-javascript>2. Amazon Location Service with JavaScript</a></li><li><a href=#3-blocking-or-allowing-through-amazon-cloudfront>3. Blocking or allowing through Amazon CloudFront</a></li><li><a href=#4-aws-waf-geo-match-statements>4. AWS WAF geo match statements</a></li><li><a href=#5-licensed-geolocation-verification-suppliers>5. Licensed geolocation verification suppliers</a></li><li><a href=#conclusion>Conclusion</a><ul><li><a href=#further-reading>Further reading</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 1</h1><h1 id=building-geolocation-verification-for-igaming-and-sports-betting-on-aws>Building geolocation verification for iGaming and sports betting on AWS</h1><p>Geolocation verification in sports betting and iGaming serves two primary purposes: compliance and fraud prevention. Online sports betting and iGaming operators may need to ensure that only players from certain regions of the world are able to view content due to in-market licensing restrictions. Or gaming regulations may require that access is restricted to persons within allowed jurisdictions while blocking unauthorized traffic at geopolitical boundaries.</p><p>In the United States, the <a href=https://www.law.cornell.edu/uscode/text/18/1084>Federal Wire Act</a>, which prohibits sports betting across state lines, begins with the following text:</p><p>Whoever being engaged in the business of betting or wagering knowingly uses a wire communication facility for the transmission in interstate or foreign commerce of bets or wagers or information assisting in the placing of bets or wagers on any sporting event or contest, or for the transmission of a wire communication which entitles the recipient to receive money or credit as a result of bets or wagers, or for information assisting in the placing of bets or wagers, shall be fined under this title or imprisoned not more than two years, or both.</p><p>IGT and the New Hampshire State lottery have <a href=https://www.bhfs.com/insight/federal-court-clarifies-sort-of-the-wire-act-s-application-beyond-sports-betting/>prevailed in a court case</a> against the United States (US) Department of Justice regarding the non-applicability of the Wire Act to iGaming and lottery operations. However, some states still require that players and wagering infrastructure be located within the same state. In these states, operators must also put in place mechanisms to detect virtual private networks (VPNs), software, virtualization, and other methods capable of circumventing player location detection. Usually this means an SDK must be compiled into an app or other software (<a href="https://medium.com/@justinricedev/what-is-a-software-sidecar-8f89feff09f9#:~:text=This%20creates%20a%20single%20point,Why%20Use%20Software%20Sidecars?">a sidecar</a>) must run alongside it.</p><p>In addition to allowing an operator to comply with regulations, geographic access controls deliver additional business benefits. Blocking traffic at the edge reduces infrastructure costs by eliminating unauthorized traffic before it reaches core systems. These controls can also be used to thwart fraud, for example, so-called <em>proxy betting</em> where a player in an allowed geographic zone places wagers for multiple people outside that zone.</p><p>The technology choice for geolocation verification depends on the specific use case of the company employing it. In the US, Brazil, and some other regions, sports betting and iGaming operators utilize compliance-tested, licensed geolocation systems, with SDKs accessing mobile OS directly to satisfy anti-spoofing requirements. However, there are alternatives which may be appropriate for content providers or operators in other regions.</p><p>These methods may be used alone or in conjunction with one another to provide a satisfactory solution, depending on compliance and business needs. Let’s explore five distinct approaches companies can use to build and deploy geolocation verification using Amazon Web Service (AWS).</p><h2 id=1-geolocation-blocking-using-amazon-route-53>1. Geolocation blocking using Amazon Route 53</h2><p>The <a href=https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy-geo.html>geolocation routing</a> capabilities of <a href=https://aws.amazon.com/route53/>Amazon Route 53</a> can restrict access to content by country, continent, or US state domain name system server (DNS) level. This DNS-based approach processes location decisions before traffic reaches your infrastructure, reducing unnecessary load and associated costs. A key benefit of this solution is that it requires no modifications to existing server or client code bases. The implementation uses DNS records with geolocation routing policies, which determine a user’s location and respond according to the rules configured for that geography. Following is an example Route 53 geolocation traffic routing policy:</p><pre tabindex=0><code>{
&#34;RuleType&#34;: &#34;geo&#34;,
    &#34;Locations&#34;: [
        {&#34;EvaluateTargetHealth&#34;: true,
        &#34;Country&#34;: &#34;SE&#34;,
                       &#34;EndpointReference&#34;: ENDPOINT_IF_TRAFFIC_ORINGINATES_FROM_SWEDEN
        },
        {
                       &#34;Country&#34;: &#34;*&#34;,
                       &#34;IsDefault&#34;: true,
                       &#34;EvaluateTargetHealth&#34;: true,
                       &#34;EndpointReference&#34;: ENDPOINT_FOR_ALL_OTHER_TRAFFIC
                       }
                   ]
}
</code></pre><p>The example policy routes traffic to endpoints based on whether the country of origin is Sweden. In this example, traffic originating from Sweden will be sent to an application load balancer, while traffic originating from elsewhere will be directed to an error page hosted on <a href=https://aws.amazon.com/cloudfront/>Amazon CloudFront</a>. Route 53 geolocation routing integrates directly with other AWS services and includes fallback rules for unmatched locations.</p><p>DNS-based geolocation does have limitations. The solution relies on the accuracy of IP-to-location mapping, which can be circumvented by VPNs or proxy servers. DNS responses may be cached by intermediate resolvers, potentially allowing users to retain access from a blocked location after moving. Additionally, the solution cannot detect device tampering, location spoofing, or prevent proxy betting. It has not been approved for use by licensed US online gambling operators for the purpose of meeting their compliance needs.</p><h2 id=2-amazon-location-service-with-javascript>2. Amazon Location Service with JavaScript</h2><p>Customers can use <a href="https://aws.amazon.com/location/?did=ap_card&trk=ap_card">Amazon Location Service</a> combined with a client-side JavaScript to build geolocation capabilities directly inside any app which uses JavaScript (web apps, React Native, Swift, and so on). This approach retrieves GPS coordinates from the user’s environment, potentially offering a more precise location determination than IP-based methods. Developers must modify their applications to include location request code, integrate the <a href=https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/javascript_location_code_examples.html>AWS SDK for JavaScipt (version 3)</a>, and create API endpoints for location verification. For a basic implementation, following is an example JavaScript implementation with error handling:</p><pre tabindex=0><code>// use API Key id for credentials
	const authHelper = await withAPIKey(&#34;api-key-id&#34;); 

// Initialize the Location client
const locationClient = new LocationClient({ 
    region: &#34;us-east-1&#34;,
    ...authHelper.getLocationClientConfig()
});

async function updateDeviceLocation() {
    try {
        // Get current position from browser
        const position = await new Promise((resolve, reject) =&gt; {
            navigator.geolocation.getCurrentPosition(resolve, reject, {
                enableHighAccuracy: true,
                timeout: 10000
            });
        });

        // Prepare the update command
        const command = new BatchUpdateDevicePositionCommand({
            TrackerName: &#34;MyDeviceTracker&#34;,
            Updates: [{
                DeviceId: &#34;mobile-device-123&#34;,
                Position: [position.coords.longitude, position.coords.latitude],
                SampleTime: new Date()
            }]
        });

        // Send location update to Amazon Location Service
        const response = await locationClient.send(command);
        console.log(&#34;Location updated successfully:&#34;, response);


    } catch (error) {
        console.error(&#34;Failed to update location:&#34;, error);
    }
} 
</code></pre><p>Amazon Location Service provides a <a href=https://docs.aws.amazon.com/location/previous/developerguide/loc-sdk-auth.html>JavaScript authentication helper</a> to streamline authentication when making API calls. This way you can avoid hardcoding credentials in your JavaScript. You can use either <a href=https://aws.amazon.com/cognito/>Amazon Cognito</a> or API keys as your authentication method. This solution requires user interaction. Browsers will display a permission prompt requesting access to location services. Once granted, the code retrieves GPS coordinates and emits events when geofence borders are crossed.</p><p>If using the <code>ForecastGeofenceEvents</code> API call, Amazon Location Service can validate them against defined geographic boundaries. For Android WebView implementations, developers must enable JavaScript in their WebView settings by requesting <code>ACCESS_FINE_LOCATION</code> permission in the app manifest. They must additionally implement a custom <code>WebChromeClient</code> to handle geolocation permission requests. Android applications also require a local device cache for storing geolocation permissions and positions, configured through the WebView’s geolocation database path setting.</p><p>For iOS WebView implementations using <code>WKWebView</code>, geolocation is allowed by default, but developers must add the <code>NSLocationWhenInUseUsageDescription</code> key to their <code>Info.plist</code> file with a message explaining the location access requirement. The application must also request location authorization through the iOS location services framework.</p><p>This solution is only viable for apps utilizing JavaScript. The implementation introduces latency as the system waits for user permission and GPS acquisition. User experience can be impacted when location access is denied, or GPS signals are unavailable in certain environments. This method cannot detect location spoofing or device tampering. While this method provides more precise location data than IP-based solutions, it still falls short of satisfying more stringent requirements for regulated gaming operations, particularly when detecting location spoofing is required.</p><h2 id=3-blocking-or-allowing-through-amazon-cloudfront>3. Blocking or allowing through Amazon CloudFront</h2><p>The geographic restrictions Amazon CloudFront offers is content access control at AWS edge locations. This solution blocks or allows requests before they reach your origin servers, reducing both infrastructure costs and potential security risks.</p><p>Following is a CloudFront geographic restriction configuration used in the Distribution Settings:</p><pre tabindex=0><code>{
    &#34;GeoRestriction&#34;: {
        &#34;RestrictionType&#34;: &#34;allowlist&#34;,  // Alternative: &#34;blocklist&#34;
        &#34;Locations&#34;: [
            &#34;GB&#34;,  // United Kingdom
            &#34;IE&#34;,  // Ireland
            &#34;MT&#34;   // Malta
        ]
    }
}
</code></pre><p>It’s also possible for you to <a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/adding-cloudfront-headers.html>configure CloudFront to add location headers</a> to the requests that CloudFront receives from your users and forward them to your app. In this way, you can create app logic that can take other actions besides allowing or denying users’ access. The geographic restrictions of CloudFront operate at the country level only—they cannot differentiate between US states or regions within countries.</p><p>For operators in markets requiring country-level blocking, CloudFront provides a cost-effective first line of defense. CloudFront geo-blocking requires minimal development effort. It can be configured through the AWS Console, command line interface (CLI), or Infrastructure as Code (IaC) tools and services without modifying application code. This makes it an attractive option for quick deployment of basic geographic controls.</p><p>Using the geographic restrictions of CloudFront does not incur additional charges beyond standard CloudFront usage fees. Blocked requests are denied at the edge location, resulting in minimal data transfer costs. When a request is blocked, CloudFront returns an HTTP 403 (Forbidden) error response, consuming only a few bytes of data transfer. This makes CloudFront geo-blocking particularly economical for applications receiving high volumes of traffic from restricted regions.</p><p>Blocking requests at CloudFront edge locations instead of your origin servers could save significant bandwidth costs and reduce the load on your backend infrastructure. Additionally, since distributed denial-of-service (DDoS) attacks often originate from specific geographic regions, country-level blocking can reduce your exposure to these attacks and associated costs.</p><p>However, CloudFront geo-blocking has limitations beyond its country-level granularity. The service relies on IP address mapping to determine location, which can be circumvented by VPNs or proxy servers. It relies on cache-control headers and invalidation strategies to verify data freshness for dynamic APIs—meaning location data may not always be up-to-date. Additionally, no device integrity checking or anti-spoofing measures are available through this method, which may invalidate it as an option for iGaming or sports betting operators with more stringent geolocation requirements.</p><h2 id=4-aws-waf-geo-match-statements>4. AWS WAF geo match statements</h2><p><a href=https://aws.amazon.com/waf/>AWS WAF</a> provides geographic access control through geo match statements, offering more granular control than CloudFront restrictions. The service can filter traffic based on both country and US state locations, making it useful for operators who need regional precision in their access controls.</p><p>Following is an AWS WAF rule with a geo match statement:</p><pre tabindex=0><code>{
  &#34;Name&#34;: &#34;RegionalAccessControl&#34;,
  &#34;Statement&#34;: {
    &#34;GeoMatchStatement&#34;: {
      &#34;CountryCodes&#34;: [&#34;SG&#34;],
      &#34;ForwardedIPConfig&#34;: {
        &#34;HeaderName&#34;: &#34;X-Forwarded-For&#34;,
        &#34;FallbackBehavior&#34;: &#34;MATCH&#34;
      }
    }
  },
  &#34;Action&#34;: {
    &#34;Allow&#34;: {}
  },
  &#34;VisibilityConfig&#34;: {
    &#34;SampledRequestsEnabled&#34;: true,
    &#34;CloudWatchMetricsEnabled&#34;: true,
    &#34;MetricName&#34;: &#34;RegionalAccessMetric&#34;
  }
}
</code></pre><p>A key advantage of AWS WAF geo matching is its integration with <a href=https://aws.amazon.com/cloudwatch/>Amazon CloudWatch</a> metrics, enabling detailed monitoring of blocked requests and traffic patterns. This visibility helps operators understand access patterns and adjust their blocking strategies accordingly. AWS WAF also handles IPv6 traffic natively and can process requests based on the <code>X-Forwarded-For</code> header, important for applications behind proxy servers or load balancers.</p><p>However, AWS WAF geo matching cannot detect sophisticated location spoofing attempts or verify device integrity. While it can <a href=https://docs.aws.amazon.com/whitepapers/latest/aws-best-practices-ddos-resiliency/aws-waf-ip-reputation.html>identify and block traffic from known proxy services and VPN endpoints</a>, determined users may still circumvent these controls.</p><h2 id=5-licensed-geolocation-verification-suppliers>5. Licensed geolocation verification suppliers</h2><p>There are many jurisdictions with stringent requirements for geolocation verification systems (for example, US and Brazil). For regulated gaming operators, these markets generally require geolocation verification systems that can detect and prevent location spoofing by verifying integrity at the device level. Licensed geolocation verification suppliers such as <a href=https://partners.amazonaws.com/partners/0010h00001doKdFAAU/GeoComply>GeoComply</a>, <a href="https://aws.amazon.com/marketplace/pp/prodview-wawct5skllemo?sr=0-1&ref_=beagle&applicationId=AWSMPContessa">OpenBet</a>, and <a href=https://xpoint.tech/>Xpoint</a> provide these capabilities.</p><p>These company’s solutions differ fundamentally from the previously described solutions in their approach to location verification. Rather than relying solely on IP addresses or GPS coordinates, they retrieve location information from the device itself (using Wi-Fi trilateration, GPS, and so on). They verify device integrity by using a device-specific SDK to examine the operating system for signs of tampering, VPNs, or location spoofing software.</p><p>Geofence management systems determine whether the device is within or near a geofence border, which may be a state border or other political boundary. Real-time monitoring detects sudden location changes that might indicate proxy betting or other nefarious action. Building these systems typically requires integration at multiple levels, including:</p><ul><li>Native SDK (iOS and Android) integration for mobile apps</li><li>Browser plugin or sidecar application for web apps</li><li>Amazon Location Services API integration</li><li>Compliance reporting endpoints</li></ul><p>Licensed geolocation suppliers are a good option when:</p><ul><li>Regulations require precise geofencing and location verification (such as the US Federal Wire Act or Brazil’s gaming laws)</li><li>Jurisdictional requirements mandate anti-spoofing and device integrity verification</li><li>Operators need to prevent proxy betting through sophisticated device-level checks</li></ul><h2 id=conclusion>Conclusion</h2><p>The choice of geolocation method depends on various factors, including regulatory requirements for the target geography, risk profile, and cost. While many operators implement multiple layers of protection, it’s crucial to understand which solutions are appropriate, based on the risks and requirements at issue. If stringent criteria are not required, the less costly solutions outlined previously can provide helpful geolocation capabilities while maintaining performance and the user experience.</p><p>Contact an <a href=https://pages.awscloud.com/Amazon-Game-Tech-Contact-Us.html>AWS Representative</a> to know how we can help accelerate your business.</p><h3 id=further-reading>Further reading</h3><ul><li><a href=https://aws.amazon.com/solutions/guidance/building-geolocation-systems-for-the-betting-and-gaming-industry-on-aws/>Guidance for Building Geolocation Systems for the Betting & Gaming Industry on AWS</a></li><li><a href=https://aws.amazon.com/about-aws/whats-new/2024/06/amazon-location-service-enhanced-location-integrity-features/>Amazon Location Service launches Enhanced Location Integrity features</a></li><li><a href=https://aws.amazon.com/solutions/case-studies/openbet-case-study/>OpenBet Delivers Geolocation Integrity for Betting and Gaming Using Solutions on AWS</a></li><li><a href=https://aws.amazon.com/blogs/apn/winning-the-cat-and-mouse-race-staying-one-step-ahead-of-streaming-geopiracy-with-geoguard-and-aws/>Winning the Cat-and-Mouse Race: Staying One Step Ahead of Streaming Geopiracy with GeoGuard and AWS</a></li></ul><p><strong>Dr. Mike Reaves</strong>
<img src=../../images/3-Blog/3.1-Blog1/Mike-Reaves.png width=100 style=float:left;margin-right:15px;margin-top:-1px></p><p>Dr. Mike Reaves is Principal Solutions Architect, Betting & Gaming at Amazon Web Services (AWS). He works with customers to develop technical strategy, and leverages AWS technologies to develop purpose-built solutions for customers. An industry veteran, Dr. Reaves is an AWS certified Solutions Architect with over 25 years of software development and IT experience. Dr. Reaves holds a Ph.D. in Physics from the University of Connecticut.</p><div style=clear:both></div><p><strong>Dr. Haowen You</strong>
<img src=../../images/3-Blog/3.1-Blog1/Haowen-You.png width=100 style=float:left;margin-right:15px;margin-top:-1px></p><p>Dr. Haowen You is Software Engineering Manager, Geospatial at Amazon Web Services (AWS). He leads a software development team for Amazon Location Service. With 12+ years of experience managing software teams and projects, Dr. You is currently focusing his efforts on AWS applied AI products. Dr. You holds a Ph.D. in Systems Engineering from the University of Virginia.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../3-blogstranslated/ title="Translated Blogs"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../3-blogstranslated/3.2-blog2/ title="Blog 2" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../js/clipboard.min.js?1765293643></script><script src=../../js/perfect-scrollbar.min.js?1765293643></script><script src=../../js/perfect-scrollbar.jquery.min.js?1765293643></script><script src=../../js/jquery.sticky.js?1765293643></script><script src=../../js/featherlight.min.js?1765293643></script><script src=../../js/highlight.pack.js?1765293643></script><script>hljs.initHighlightingOnLoad()</script><script src=../../js/modernizr.custom-3.6.0.js?1765293643></script><script src=../../js/learn.js?1765293643></script><script src=../../js/hugo-learn.js?1765293643></script><link href=../../mermaid/mermaid.css?1765293643 rel=stylesheet><script src=../../mermaid/mermaid.js?1765293643></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>